define(function(c,b,d){var a={pagerid:"kkpager",mode:"link",pno:1,total:1,totalRecords:0,isShowFirstPageBtn:true,isShowLastPageBtn:true,isShowPrePageBtn:true,isShowNextPageBtn:true,isShowTotalPage:true,isShowCurrPage:true,isShowTotalRecords:false,isGoPage:true,isWrapedPageBtns:true,isWrapedInfoTextAndGoPageBtn:true,hrefFormer:"",hrefLatter:"",gopageWrapId:"kkpager_gopage_wrap",gopageButtonId:"kkpager_btn_go",gopageTextboxId:"kkpager_btn_go_input",lang:{firstPageText:"首页",firstPageTipText:"首页",lastPageText:"尾页",lastPageTipText:"尾页",prePageText:"上一页",prePageTipText:"上一页",nextPageText:"下一页",nextPageTipText:"下一页",totalPageBeforeText:"共",totalPageAfterText:"页",currPageBeforeText:"当前第",currPageAfterText:"页",totalInfoSplitStr:"/",totalRecordsBeforeText:"共",totalRecordsAfterText:"条数据",gopageBeforeText:"&nbsp;转到",gopageButtonOkText:"确定",gopageAfterText:"页",buttonTipBeforeText:"第",buttonTipAfterText:"页"},getLink:function(e){if(e==1){return this.hrefFormer+this.hrefLatter}return this.hrefFormer+"_"+e+this.hrefLatter},click:function(e){return false},getHref:function(e){return"#"},focus_gopage:function(){var e=$("#"+this.gopageButtonId);$("#"+this.gopageTextboxId).attr("hideFocus",true);e.show();e.css("left","10px");$("#"+this.gopageTextboxId).addClass("focus");e.animate({left:"+=30"},50)},blur_gopage:function(){var e=this;setTimeout(function(){var f=$("#"+e.gopageButtonId);f.animate({left:"-=25"},100,function(){f.hide();$("#"+e.gopageTextboxId).removeClass("focus")})},400)},keypress_gopage:function(){var f=arguments[0]||window.event;var e=f.keyCode||f.charCode;if(e==8){return true}if(e==13){a.gopage();return false}if(f.ctrlKey&&(e==99||e==118)){return true}if(e<48||e>57){return false}return true},gopage:function(){var e=$("#"+this.gopageTextboxId).val();if(isNaN(e)){$("#"+this.gopageTextboxId).val(this.next);return}var f=parseInt(e);if(f<1){f=1}if(f>this.total){f=this.total}if(this.mode=="click"){this._clickHandler(f)}else{window.location=this.getLink(f)}},selectPage:function(e){this._config["pno"]=e;this.generPageHtml(this._config,true)},generPageHtml:function(g,q){if(q||!this.inited){this.init(g)}var h="",t="",k="",r="";if(this.isShowFirstPageBtn){if(this.hasPrv){h="<a "+this._getHandlerStr(1)+' title="'+(this.lang.firstPageTipText||this.lang.firstPageText)+'">'+this.lang.firstPageText+"</a>"}else{h='<span class="disabled">'+this.lang.firstPageText+"</span>"}}if(this.isShowPrePageBtn){if(this.hasPrv){t="<a "+this._getHandlerStr(this.prv)+' title="'+(this.lang.prePageTipText||this.lang.prePageText)+'">'+this.lang.prePageText+"</a>"}else{t='<span class="disabled">'+this.lang.prePageText+"</span>"}}if(this.isShowNextPageBtn){if(this.hasNext){k="<a "+this._getHandlerStr(this.next)+' title="'+(this.lang.nextPageTipText||this.lang.nextPageText)+'">'+this.lang.nextPageText+"</a>"}else{k='<span class="disabled">'+this.lang.nextPageText+"</span>"}}if(this.isShowLastPageBtn){if(this.hasNext){r="<a "+this._getHandlerStr(this.total)+' title="'+(this.lang.lastPageTipText||this.lang.lastPageText)+'">'+this.lang.lastPageText+"</a>"}else{r='<span class="disabled">'+this.lang.lastPageText+"</span>"}}var p="";var e='<span class="spanDot">...</span>';var m='<span class="totalText">';var o='<span class="totalInfoSplitStr">'+this.lang.totalInfoSplitStr+"</span>";if(this.isShowCurrPage){m+=this.lang.currPageBeforeText+'<span class="currPageNum">'+this.pno+"</span>"+this.lang.currPageAfterText;if(this.isShowTotalPage){m+=o;m+=this.lang.totalPageBeforeText+'<span class="totalPageNum">'+this.total+"</span>"+this.lang.totalPageAfterText}else{if(this.isShowTotalRecords){m+=o;m+=this.lang.totalRecordsBeforeText+'<span class="totalRecordNum">'+this.totalRecords+"</span>"+this.lang.totalRecordsAfterText}}}else{if(this.isShowTotalPage){m+=this.lang.totalPageBeforeText+'<span class="totalPageNum">'+this.total+"</span>"+this.lang.totalPageAfterText;if(this.isShowTotalRecords){m+=o;m+=this.lang.totalRecordsBeforeText+'<span class="totalRecordNum">'+this.totalRecords+"</span>"+this.lang.totalRecordsAfterText}}else{if(this.isShowTotalRecords){m+=this.lang.totalRecordsBeforeText+'<span class="totalRecordNum">'+this.totalRecords+"</span>"+this.lang.totalRecordsAfterText}}}m+="</span>";var n="";if(this.isGoPage){n='<span class="goPageBox">'+this.lang.gopageBeforeText+'<span id="'+this.gopageWrapId+'">'+'<input type="button" id="'+this.gopageButtonId+'" onclick="kkpager.gopage()" value="'+this.lang.gopageButtonOkText+'" />'+'<input type="text" id="'+this.gopageTextboxId+'" onfocus="kkpager.focus_gopage()"  onkeypress="return kkpager.keypress_gopage(event);"   onblur="kkpager.blur_gopage()" value="'+this.next+'" /></span>'+this.lang.gopageAfterText+"</span>"}if(this.total<=8){for(var l=1;l<=this.total;l++){if(this.pno==l){p+='<span class="curr">'+l+"</span>"}else{p+="<a "+this._getHandlerStr(l)+' title="'+this.lang.buttonTipBeforeText+l+this.lang.buttonTipAfterText+'">'+l+"</a>"}}}else{if(this.pno<=5){for(var l=1;l<=7;l++){if(this.pno==l){p+='<span class="curr">'+l+"</span>"}else{p+="<a "+this._getHandlerStr(l)+' title="'+this.lang.buttonTipBeforeText+l+this.lang.buttonTipAfterText+'">'+l+"</a>"}}p+=e}else{p+="<a "+this._getHandlerStr(1)+' title="'+this.lang.buttonTipBeforeText+"1"+this.lang.buttonTipAfterText+'">1</a>';p+="<a "+this._getHandlerStr(2)+' title="'+this.lang.buttonTipBeforeText+"2"+this.lang.buttonTipAfterText+'">2</a>';p+=e;var f=this.pno-2;var j=this.pno+2;if(j>this.total){j=this.total;f=j-4;if(this.pno-f<2){f=f-1}}else{if(j+1==this.total){j=this.total}}for(var l=f;l<=j;l++){if(this.pno==l){p+='<span class="curr">'+l+"</span>"}else{p+="<a "+this._getHandlerStr(l)+' title="'+this.lang.buttonTipBeforeText+l+this.lang.buttonTipAfterText+'">'+l+"</a>"}}if(j!=this.total){p+=e}}}var s="<div>";if(this.isWrapedPageBtns){s+='<span class="pageBtnWrap">'+h+t+p+k+r+"</span>"}else{s+=h+t+p+k+r}if(this.isWrapedInfoTextAndGoPageBtn){s+='<span class="infoTextAndGoPageBtnWrap">'+m+n+"</span>"}else{s+=m+n}s+='</div><div style="clear:both;"></div>';$("#"+this.pagerid).html(s)},init:function(e){this.pno=isNaN(e.pno)?1:parseInt(e.pno);this.total=isNaN(e.total)?1:parseInt(e.total);this.totalRecords=isNaN(e.totalRecords)?0:parseInt(e.totalRecords);if(e.pagerid){this.pagerid=e.pagerid}if(e.mode){this.mode=e.mode}if(e.gopageWrapId){this.gopageWrapId=e.gopageWrapId}if(e.gopageButtonId){this.gopageButtonId=e.gopageButtonId}if(e.gopageTextboxId){this.gopageTextboxId=e.gopageTextboxId}if(e.isShowFirstPageBtn!=undefined){this.isShowFirstPageBtn=e.isShowFirstPageBtn}if(e.isShowLastPageBtn!=undefined){this.isShowLastPageBtn=e.isShowLastPageBtn}if(e.isShowPrePageBtn!=undefined){this.isShowPrePageBtn=e.isShowPrePageBtn}if(e.isShowNextPageBtn!=undefined){this.isShowNextPageBtn=e.isShowNextPageBtn}if(e.isShowTotalPage!=undefined){this.isShowTotalPage=e.isShowTotalPage}if(e.isShowCurrPage!=undefined){this.isShowCurrPage=e.isShowCurrPage}if(e.isShowTotalRecords!=undefined){this.isShowTotalRecords=e.isShowTotalRecords}if(e.isWrapedPageBtns){this.isWrapedPageBtns=e.isWrapedPageBtns}if(e.isWrapedInfoTextAndGoPageBtn){this.isWrapedInfoTextAndGoPageBtn=e.isWrapedInfoTextAndGoPageBtn}if(e.isGoPage!=undefined){this.isGoPage=e.isGoPage}if(e.lang){for(var f in e.lang){this.lang[f]=e.lang[f]}}this.hrefFormer=e.hrefFormer||"";this.hrefLatter=e.hrefLatter||"";if(e.getLink&&typeof(e.getLink)=="function"){this.getLink=e.getLink}if(e.click&&typeof(e.click)=="function"){this.click=e.click}if(e.getHref&&typeof(e.getHref)=="function"){this.getHref=e.getHref}if(!this._config){this._config=e}if(this.pno<1){this.pno=1}this.total=(this.total<=1)?1:this.total;if(this.pno>this.total){this.pno=this.total}this.prv=(this.pno<=2)?1:(this.pno-1);this.next=(this.pno>=this.total-1)?this.total:(this.pno+1);this.hasPrv=(this.pno>1);this.hasNext=(this.pno<this.total);this.inited=true},_getHandlerStr:function(e){if(this.mode=="click"){return'href="'+this.getHref(e)+"\" onclick=\"return seajs.use('3th/kkpager',function(module){module.kkpager._clickHandler("+e+')})"'}return'href="'+this.getLink(e)+'"'},_clickHandler:function(f){var e=false;if(this.click&&typeof this.click=="function"){e=this.click.call(this,f)||false}return e}};b.kkpager=a});